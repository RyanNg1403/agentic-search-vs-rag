
Tool system architecture is centralized in packages/core/src/tools/tools.ts. You must extend BaseDeclarativeTool or DeclarativeTool to create new tools. Tools separate validation from execution: build() validates params and returns ToolInvocation, then execute() runs the tool. Tool types are categorized by Kind enum (Read, Edit, Delete, Move, Search, Execute, Think, Fetch, Other). The confirmation flow uses shouldConfirmExecute() returning ToolCallConfirmationDetails. All tools must provide schema (FunctionDeclaration), displayName, description, and kind. MessageBus integration enables policy-based tool execution control via getMessageBusDecision().
